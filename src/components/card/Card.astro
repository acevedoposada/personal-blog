---
import dayjs from 'dayjs';

import type { BlogCardProps, CardProps } from './Card.model'

type Props = BlogCardProps;

const { variant, date, ...props } = Astro.props;

let CardComponent: (_props: CardProps) => any;

const formattedDate = dayjs(date || new Date()).format("MMM DD, YYYY");

switch (variant) {
  case 'featured':
    CardComponent = (await import('./featured/Featured.astro')).default;
    break;
  case 'post':
    CardComponent = (await import('./post/Post.astro')).default;
    break;
  default:
    throw new Error(`Unknown card variant: ${variant}`);
}
---

<CardComponent {...props} date={formattedDate} />